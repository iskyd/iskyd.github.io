<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Zurl - HTTP Request tool written in Zig - Hello</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Zurl is a command-line tool written in Zig, designed to provide a simplified interface to perform HTTP requests, inspired by the functionality of curl.
Motivation When building/testing APIs I often find myself executing a lot of api calls, multiple times, with different parameters, managing authentication manually and a lot of other funny things.
Usually I use curl and postman but I find the last one faster due the fact that I can save the requests, execute them with just one click, managing enviroments variables (things such as host, apikey &mldr;) and use scripts to automate the authentication via pre-request scripts (there is a lot of dark magic you can achieve with pre-request script)."><meta property="og:image" content><meta property="og:title" content="Zurl - HTTP Request tool written in Zig"><meta property="og:description" content="Zurl is a command-line tool written in Zig, designed to provide a simplified interface to perform HTTP requests, inspired by the functionality of curl.
Motivation When building/testing APIs I often find myself executing a lot of api calls, multiple times, with different parameters, managing authentication manually and a lot of other funny things.
Usually I use curl and postman but I find the last one faster due the fact that I can save the requests, execute them with just one click, managing enviroments variables (things such as host, apikey &mldr;) and use scripts to automate the authentication via pre-request scripts (there is a lot of dark magic you can achieve with pre-request script)."><meta property="og:type" content="article"><meta property="og:url" content="https://iskyd.github.io/posts/2024-04-24-zurl/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-24T22:03:30+02:00"><meta property="article:modified_time" content="2024-04-24T22:03:30+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Zurl - HTTP Request tool written in Zig"><meta name=twitter:description content="Zurl is a command-line tool written in Zig, designed to provide a simplified interface to perform HTTP requests, inspired by the functionality of curl.
Motivation When building/testing APIs I often find myself executing a lot of api calls, multiple times, with different parameters, managing authentication manually and a lot of other funny things.
Usually I use curl and postman but I find the last one faster due the fact that I can save the requests, execute them with just one click, managing enviroments variables (things such as host, apikey &mldr;) and use scripts to automate the authentication via pre-request scripts (there is a lot of dark magic you can achieve with pre-request script)."><script src=https://iskyd.github.io/js/feather.min.js></script>
<link href=https://iskyd.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://iskyd.github.io/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://iskyd.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css disabled></head><body><div class=content><header><div class=main><a href=https://iskyd.github.io/>Hello</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
| <span id=dark-mode-toggle onclick=toggleTheme()></span>
<script src=https://iskyd.github.io/js/themetoggle.js></script></nav></header><main><article><div class=title><h1 class=title>Zurl - HTTP Request tool written in Zig</h1><div class=meta>Posted on Apr 24, 2024</div></div><section class=body><p><a href=https://github.com/iskyd/zurl>Zurl</a> is a command-line tool written in Zig, designed to provide a simplified interface to perform HTTP requests, inspired by the functionality of curl.</p><h3 id=motivation>Motivation</h3><p>When building/testing APIs I often find myself executing a lot of api calls, multiple times, with different parameters, managing authentication manually and a lot of other funny things.</p><p>Usually I use curl and postman but I find the last one faster due the fact that I can save the requests, execute them with just one click, managing enviroments variables (things such as host, apikey &mldr;) and use scripts to automate the authentication via pre-request scripts (there is a lot of dark magic you can achieve with pre-request script).</p><p>But at the same time I just want to stay in my terminal with my hands on the keyboard.</p><p>I don&rsquo;t know if a tools that meets these requirements already exists, or if I can achieve the same result using curl (I did a small research with no results), but I&rsquo;ve decided that this project could be really nice to implement in Zig.</p><h3 id=libraries>Libraries</h3><p>At the moment I&rsquo;m using 3 libraries in the project</p><ol><li><a href=https://github.com/Hejsil/zig-clap>Clap</a> - An amazing library for command line argument parsing.</li><li>libcurl - I&rsquo;m relying on libcurl for http requests. There are two main reason why I&rsquo;m using libcurl. It&rsquo;s an amazing library and I want to test/learn interoperability between Zig and C.</li><li>sqlite3 - I&rsquo;m using sqlite3 as storage to save requests.</li></ol><h3 id=lets-go>Let&rsquo;s Go</h3><p>The first thing I did is to use devbox to create a reproducible shell with all that is needed to build the project. I lost hours trying to understand how to add headers and libraries of a package (you just need to add ^dev). From now on (on every pc) I just to type devbox shell, to get Zig, zls (language server) and all the tools needed to build Zurl.</p><p>One of the best feature of Zig is the build.zig file (goodbye Makefile), where you can specify your build graph. I just linked libC, libcurl, sqlite3 and clap (7 lines of code), and everything works smooth. I can just import libcurl and sqlite3 using</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span>@cImport(@cInclude(<span style=color:#e6db74>&#34;curl/curl.h&#34;</span>)); 
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> sqlite <span style=color:#f92672>=</span> @cImport(@cInclude(<span style=color:#e6db74>&#34;sqlite3.h&#34;</span>));
</span></span></code></pre></div><p>The interoperability with C that Zig offers is really amazing. I just have some troubles using C NULL but turns out I just need to define it</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zig data-lang=zig><span style=display:flex><span><span style=color:#66d9ef>const</span> NULL<span style=color:#f92672>:</span> <span style=color:#f92672>?*</span>anyopaque <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span></code></pre></div><h3 id=features>Features</h3><p>At the moment zurl can execute (GET,POST,OPTIONS,PATCH,PUT) http request, save/load them using sqlite database. You can specify headers, query params and json data.</p><p>The command below will execute the GET request and save it with the name pokemon/mewtwo. You can the re-execute the request simply loading from the storage.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>zurl --save pokemon/mewtwo --db zurl.db --method GET https://pokeapi.co/api/v2/pokemon/mewtwo
</span></span><span style=display:flex><span>zurl --find pokemon/mewtwo --db zurl.db
</span></span></code></pre></div><h3 id=whats-next>What&rsquo;s next?</h3><p>I&rsquo;m not really happy about the command arguments, so I will start to refactor them.</p><p>Then I will work on the most important features to me:</p><ol><li>Specify which kind of information you want back after executing the request (something like -i in curl)</li><li>Use of environment variables (zurl &ndash;env API_KEY=123 &ndash;header api-key={API_KEY} &ndash;method GET <a href=https://pokeapi.co/api/v2/pokemon/mewtwo>https://pokeapi.co/api/v2/pokemon/mewtwo</a>)</li><li>Pre-request scripts</li></ol><h3 id=in-the-end>In the end</h3><p>Few days ago <a href=https://ziglang.org/download/0.12.0/release-notes.html>Zig 0.12</a> was realeased, so I will try to update from Zig 0.11 when the new version will be available on Nix.</p><p>In the end I will try to focus on tests, but just for fun. At the moment I don&rsquo;t have any clear idea on how to approach this stage.</p></section><div class=post-tags></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/iskyd rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://twitter.com/iskypitts/ rel=me title=Twitter><i data-feather=twitter></i></a>
<a class=border></a></div><div class=footer-info>2024 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script>feather.replace()</script></div></body></html>